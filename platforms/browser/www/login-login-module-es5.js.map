{"version":3,"sources":["webpack:///src/app/login/login.page.html","webpack:///src/app/login/login-routing.module.ts","webpack:///src/app/login/login.module.ts","webpack:///src/app/login/login.page.scss","webpack:///src/app/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","formBuilder","apiServiceService","loadingController","alertController","LoginData","user_name","email","phone_no","isSubmitted","isLoggedIn","ionicUserLoginForm","group","required","pattern","verifyOtpForm","otp","valid","console","log","loginUser","create","message","loading","present","userLogin","value","subscribe","res","status","userData","dismiss","showAlertController","Message","event","next","prev","target","length","setFocus","user","user_id","verifyOTP","localStorage","setItem","JSON","stringify","navigate","sub_header","msg","subHeader","buttons","then","controls","selector","template"],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"featured\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/sign-in-or-sin-up\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Login</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <ion-header class=\\\"ion-no-border\\\">\\r\\n    <ion-toolbar>\\r\\n      <h1  class=\\\"ion-text-center\\\"><b>BIDMOZ</b></h1>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <div class=\\\"container\\\">\\r\\n    <ion-card  *ngIf=\\\"!isLoggedIn\\\">\\r\\n      <ion-card-content>\\r\\n        <form [formGroup]=\\\"ionicUserLoginForm\\\" (ngSubmit)=\\\"loginForm()\\\" novalidate>\\r\\n          <ion-item lines=\\\"full\\\">\\r\\n            <ion-label position=\\\"floating\\\">Phone Number</ion-label>\\r\\n            <ion-input maxlength=\\\"10\\\" formControlName=\\\"phone_no\\\" type=\\\"text\\\" required></ion-input>\\r\\n          </ion-item>\\r\\n          <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.phone_no.errors?.required\\\">\\r\\n            Phone number is required.\\r\\n          </span>\\r\\n          <ion-row>\\r\\n            <ion-col>\\r\\n              <ion-button type=\\\"submit\\\" color=\\\"danger\\\" expand=\\\"block\\\">Sign In</ion-button>\\r\\n              <!-- <a [routerLink]=\\\"['/forgot-password']\\\" class=\\\"small-text\\\">Forgot Password?</a> -->\\r\\n            </ion-col>\\r\\n  \\r\\n          </ion-row>\\r\\n        </form>\\r\\n      </ion-card-content>\\r\\n    </ion-card>\\r\\n  \\r\\n    <ion-card  *ngIf=\\\"isLoggedIn\\\">\\r\\n      <ion-card-content>\\r\\n        <form [formGroup]=\\\"verifyOtpForm\\\" (ngSubmit)=\\\"SubmitOtPForm()\\\">\\r\\n          <p style=\\\"text-align: center;\\\">Please enter one time verification code sent to +91{{userData.phone_no}}</p>\\r\\n          <ion-grid>\\r\\n            <ion-row>\\r\\n              <ion-col>\\r\\n                <ion-item>\\r\\n                  <ion-input type=\\\"text\\\" placeholder=\\\"Enter Otp\\\" maxlength=\\\"4\\\" formControlName=\\\"otp\\\"></ion-input>\\r\\n                </ion-item>\\r\\n              </ion-col>\\r\\n              <!-- <ion-col>\\r\\n            <ion-item >\\r\\n              <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\"  #otp1  (keyup)=\\\"otpController($event,otp2,'')\\\"  ></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-col>\\r\\n          <ion-col >\\r\\n            <ion-item>\\r\\n              <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp2 (keyup)=\\\"otpController($event,otp3,otp1)\\\" ></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-col>\\r\\n          <ion-col >\\r\\n            <ion-item>\\r\\n              <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp3  (keyup)=\\\"otpController($event,otp4,otp2)\\\" ></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-col>\\r\\n          <ion-col >\\r\\n            <ion-item>\\r\\n              <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp4  (keyup)=\\\"otpController($event,'',otp3)\\\"></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-col> -->\\r\\n            </ion-row>\\r\\n            <ion-row>\\r\\n              <ion-col>\\r\\n                <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\">Submit</ion-button>\\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n          </ion-grid>\\r\\n        </form>\\r\\n      </ion-card-content>\\r\\n    </ion-card>\\r\\n  </div>\\r\\n\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","export default \".container {\\n  margin-top: 25%;\\n}\\n\\n.ion-text-center {\\n  color: white;\\n  margin-top: 25%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksZUFBQTtBQUFKOztBQVFBO0VBQ0ksWUFBQTtFQUNBLGVBQUE7QUFMSiIsImZpbGUiOiJzcmMvYXBwL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xyXG4gICAgLy8gdG9wOiAyMiU7XHJcbiAgICBtYXJnaW4tdG9wOiAyNSU7XHJcbiAgICAvLyAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxufVxyXG4vLyBpb24tY29udGVudHtcclxuLy8gICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6I0VCRUJGNTtcclxuLy8gICB9XHJcblxyXG5cclxuLmlvbi10ZXh0LWNlbnRlcntcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbi10b3A6IDI1JTtcclxuICB9Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, LoadingController } from '@ionic/angular';\r\nimport { ApiServiceService } from '../api-service.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  LoginData: any = { user_name: \"\", email: \"\", phone_no: \"\"};\r\n  ionicUserLoginForm: FormGroup;\r\n  verifyOtpForm:FormGroup;\r\n  isSubmitted = false;\r\n  isLoggedIn = false;\r\n  userData: any;\r\n\r\n  constructor(\r\n    public formBuilder: FormBuilder,\r\n    private apiServiceService: ApiServiceService,\r\n    private routes:Router,\r\n    public loadingController: LoadingController,\r\n    public alertController: AlertController\r\n  ) { }\r\n  \r\n  ngOnInit() {\r\n    this.ionicUserLoginForm = this.formBuilder.group({\r\n      phone_no: ['', [Validators.required, Validators.pattern('^[0-9]+$')]]\r\n    });\r\n    this.verifyOtpForm = this.formBuilder.group({\r\n      otp: ['', [Validators.required, Validators.pattern('^[0-9]+$')]]\r\n    });\r\n  }\r\n\r\n  get errorControl() {\r\n    return this.ionicUserLoginForm.controls;\r\n  }\r\n\r\n  loginForm() {\r\n    this.isSubmitted = true;\r\n    if (!this.ionicUserLoginForm.valid) {\r\n      console.log('Please provide the Mobile Number!')\r\n      return false;\r\n    } else {\r\n      this.loginUser();\r\n    }\r\n  }\r\n\r\n  async loginUser() {\r\n\r\n    const loading = await this.loadingController.create({\r\n      message: 'Loading...'\r\n    });\r\n    await loading.present();\r\n    await this.apiServiceService.userLogin(this.ionicUserLoginForm.value.phone_no).subscribe((res:any)=>{\r\n      console.log(res);\r\n      if(res){\r\n        if(res.status === \"Success\"){\r\n          this.userData = res;\r\n          this.isLoggedIn = true;\r\n          loading.dismiss();\r\n        } else if(res.status === \"Failed\"){\r\n          this.isLoggedIn = false;\r\n          loading.dismiss();\r\n          this.showAlertController(\"Login failed!\", res.Message);\r\n        }\r\n      }\r\n     \r\n    })\r\n\r\n  }\r\n\r\n  otpController(event,next,prev){\r\n    if(event.target.value.length < 1 && prev){\r\n      prev.setFocus()\r\n    }\r\n    else if(next && event.target.value.length>0){\r\n      next.setFocus();\r\n    }\r\n    else {\r\n      return 0;\r\n    } \r\n  }\r\n\r\n  SubmitOtPForm() {\r\n    //console.log(this.verifyOtpForm.value.otp);\r\n    let user = {\r\n      user_id: this.userData.user_id,\r\n      phone_no: this.userData.phone_no,\r\n    }\r\n    //console.log(user);\r\n    if(this.userData.otp == this.verifyOtpForm.value.otp){\r\n      this.verifyOTP(user);\r\n    }\r\n  }\r\n\r\n  async verifyOTP(user) {\r\n\r\n    const loading = await this.loadingController.create({\r\n      message: 'Loading...'\r\n    });\r\n    await loading.present();\r\n    await this.apiServiceService.verifyOTP(user).subscribe((res:any)=>{\r\n      console.log(res);\r\n      localStorage.setItem('userData', JSON.stringify(res));\r\n      loading.dismiss();\r\n      this.routes.navigate(['current-sessions']);\r\n    })\r\n\r\n  }\r\n\r\n  showAlertController(sub_header, msg) {\r\n    this.alertController.create({\r\n      //header: 'Alert',\r\n      subHeader: sub_header,\r\n      message: msg,\r\n      buttons: ['OK']\r\n    }).then(res => {\r\n\r\n      res.present();\r\n\r\n    });\r\n  }\r\n\r\n}\r\n"]}