{"version":3,"sources":["webpack:///src/app/login/login.page.html","webpack:///src/app/login/login-routing.module.ts","webpack:///src/app/login/login.module.ts","webpack:///src/app/login/login.page.scss","webpack:///src/app/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","formBuilder","apiServiceService","loadingController","alertController","LoginData","user_name","email","phone_no","isSubmitted","isLoggedIn","ionicUserLoginForm","group","required","pattern","verifyOtpForm","otp","valid","console","log","loginUser","create","message","loading","present","userLogin","value","subscribe","res","status","userData","dismiss","showAlertController","Message","event","next","prev","target","length","setFocus","user","user_id","verifyOTP","localStorage","setItem","JSON","stringify","navigate","sub_header","msg","subHeader","buttons","then","controls","selector","template"],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-card class=\\\"container\\\" *ngIf=\\\"!isLoggedIn\\\">\\n    <ion-card-content>\\n<form [formGroup]=\\\"ionicUserLoginForm\\\" (ngSubmit)=\\\"loginForm()\\\" novalidate>\\n  <ion-item lines=\\\"full\\\">\\n    <ion-label position=\\\"floating\\\">Mobile No</ion-label>\\n    <ion-input maxlength=\\\"10\\\" formControlName=\\\"phone_no\\\" type=\\\"text\\\" required></ion-input>\\n  </ion-item>\\n  <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.phone_no.errors?.required\\\">\\n    Mobile number is required.\\n  </span>\\n  <ion-row>\\n    <ion-col>\\n      <ion-button type=\\\"submit\\\" color=\\\"danger\\\" expand=\\\"block\\\">Sign In</ion-button>\\n      <!-- <a [routerLink]=\\\"['/forgot-password']\\\" class=\\\"small-text\\\">Forgot Password?</a> -->\\n    </ion-col>\\n\\n  </ion-row>\\n</form>\\n</ion-card-content>\\n  </ion-card>\\n\\n<ion-card class=\\\"container\\\" *ngIf=\\\"isLoggedIn\\\">\\n  <ion-card-content>\\n    <form [formGroup]=\\\"verifyOtpForm\\\" (ngSubmit)=\\\"SubmitOtPForm()\\\">\\n        <p style=\\\"text-align: center;\\\">Please enter one time verification code sent to +91{{userData.phone_no}}</p>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-item >\\n            <ion-input type=\\\"text\\\" placeholder=\\\"Enter Otp\\\" maxlength=\\\"4\\\" formControlName=\\\"otp\\\"></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        <!-- <ion-col>\\n          <ion-item >\\n            <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\"  #otp1  (keyup)=\\\"otpController($event,otp2,'')\\\"  ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col >\\n          <ion-item>\\n            <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp2 (keyup)=\\\"otpController($event,otp3,otp1)\\\" ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col >\\n          <ion-item>\\n            <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp3  (keyup)=\\\"otpController($event,otp4,otp2)\\\" ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col >\\n          <ion-item>\\n            <ion-input type=\\\"tel\\\" placeholder=\\\"*\\\" maxlength=\\\"1\\\" #otp4  (keyup)=\\\"otpController($event,'',otp3)\\\"></ion-input>\\n          </ion-item>\\n        </ion-col> -->\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\">Submit</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n  </ion-card-content>\\n</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \".container {\\n  top: 22%;\\n  --ion-background-color: white;\\n}\\n\\nion-content {\\n  --ion-background-color:#EBEBF5;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksUUFBQTtFQUNBLDZCQUFBO0FBQ0o7O0FBQ0E7RUFDSSw4QkFBQTtBQUVKIiwiZmlsZSI6InNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gICAgdG9wOiAyMiU7XG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5pb24tY29udGVudHtcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiNFQkVCRjU7XG4gIH0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { Router } from '@angular/router';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { ApiServiceService } from '../api-service.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  LoginData: any = { user_name: \"\", email: \"\", phone_no: \"\"};\n  ionicUserLoginForm: FormGroup;\n  verifyOtpForm:FormGroup;\n  isSubmitted = false;\n  isLoggedIn = false;\n  userData: any;\n\n  constructor(\n    public formBuilder: FormBuilder,\n    private apiServiceService: ApiServiceService,\n    private routes:Router,\n    public loadingController: LoadingController,\n    public alertController: AlertController\n  ) { }\n  \n  ngOnInit() {\n    this.ionicUserLoginForm = this.formBuilder.group({\n      phone_no: ['', [Validators.required, Validators.pattern('^[0-9]+$')]]\n    });\n    this.verifyOtpForm = this.formBuilder.group({\n      otp: ['', [Validators.required, Validators.pattern('^[0-9]+$')]]\n    });\n  }\n\n  get errorControl() {\n    return this.ionicUserLoginForm.controls;\n  }\n\n  loginForm() {\n    this.isSubmitted = true;\n    if (!this.ionicUserLoginForm.valid) {\n      console.log('Please provide the Mobile Number!')\n      return false;\n    } else {\n      this.loginUser();\n    }\n  }\n\n  async loginUser() {\n\n    const loading = await this.loadingController.create({\n      message: 'Loading...'\n    });\n    await loading.present();\n    await this.apiServiceService.userLogin(this.ionicUserLoginForm.value.phone_no).subscribe((res:any)=>{\n      console.log(res);\n      if(res){\n        if(res.status === \"Success\"){\n          this.userData = res;\n          this.isLoggedIn = true;\n          loading.dismiss();\n        } else if(res.status === \"Failed\"){\n          this.isLoggedIn = false;\n          loading.dismiss();\n          this.showAlertController(\"Login failed!\", res.Message);\n        }\n      }\n     \n    })\n\n  }\n\n  otpController(event,next,prev){\n    if(event.target.value.length < 1 && prev){\n      prev.setFocus()\n    }\n    else if(next && event.target.value.length>0){\n      next.setFocus();\n    }\n    else {\n      return 0;\n    } \n  }\n\n  SubmitOtPForm() {\n    //console.log(this.verifyOtpForm.value.otp);\n    let user = {\n      user_id: this.userData.user_id,\n      phone_no: this.userData.phone_no,\n    }\n    //console.log(user);\n    if(this.userData.otp == this.verifyOtpForm.value.otp){\n      this.verifyOTP(user);\n    }\n  }\n\n  async verifyOTP(user) {\n\n    const loading = await this.loadingController.create({\n      message: 'Loading...'\n    });\n    await loading.present();\n    await this.apiServiceService.verifyOTP(user).subscribe((res:any)=>{\n      console.log(res);\n      localStorage.setItem('userData', JSON.stringify(res));\n      loading.dismiss();\n      this.routes.navigate(['featured-product']);\n    })\n\n  }\n\n  showAlertController(sub_header, msg) {\n    this.alertController.create({\n      //header: 'Alert',\n      subHeader: sub_header,\n      message: msg,\n      buttons: ['OK']\n    }).then(res => {\n\n      res.present();\n\n    });\n  }\n\n}\n"]}